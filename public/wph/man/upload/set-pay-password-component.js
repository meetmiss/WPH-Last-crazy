(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'");}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){window.SetPayPwd=function(options){this.options=$.extend({isBg:true,
hasPhoneTip:false,show:true,success:function(){},finish:function(){},error:function(){},cancel:function(){}},options);var browser,version,isIE6;var ua=window.navigator.userAgent;if(/MSIE/.test(ua)){browser="MSIE";version=/MSIE \d+[.]\d+/.exec(ua)[0].split(" ")[1]}isIE6=browser==="MSIE"&&version==="6.0";this.phoneUrl="https://safe.vip.com/phone/bind_phone";this.loginUrl="https://passport.vip.com/login?gotype=2";this.tipsUrl="https://safe.vip.com/wallet/setPayPW/bind_tips";this.setPayUrl="https://myvpal.vip.com/pc/setPayPassComponent";
if($("#setPayPwd_bg")[0])$("#setPayPwd_bg").remove();if($("#setPayPwd_iframe")[0])$("#setPayPwd_iframe").remove();this.iframeBg=$("<div>",{id:"setPayPwd_bg"}).css({"backgroundColor":"#000","width":isIE6?$(document).width():"100%","height":isIE6?$(document).height():"100%","display":"none","position":isIE6?"absolute":"fixed","opacity":0.7,"top":0,"left":0,"zIndex":200});this.iframe=$("<iframe>",{id:"setPayPwd_iframe",allowtransparency:true,frameborder:0}).css({"position":isIE6?"absolute":"fixed","top":isIE6?
+$(document).scrollTop()+(+$("html").height()-350)/2+"px":"40%","left":"50%","width":"460px","height":"350px","border":"medium none","marginLeft":"-217px","marginTop":"-156px","display":"none","zIndex":1E3});this.build();this.initMessager();if(this.options.show){this.show();if(VIPSHOP.Detect.isIE6)this.iframe.attr("src",this.setPayUrl)}};SetPayPwd.prototype={constructor:SetPayPwd,dealWithMsg:function(msg){var _self=this;if(msg.indexOf("closeDialog")>-1){_self.remove();_self.options.cancel()}else if(msg.indexOf("loginSuccess")>
-1||(msg.indexOf("bindPhoneSuccess")>-1||msg==="reload")){_self.iframe.attr("src",_self.setPayUrl);_self.iframe.css({width:460,height:350})}else if(msg==="vipLogin")_self.toLogin();else if(msg==="bindPhoneTip")_self.options.hasPhoneTip?_self.toBindPhoneTip():_self.toBindPhone();else if(msg==="bindPhone"){_self.toBindPhone();_self.iframe.css({width:435,height:312})}else if(msg.indexOf("error")>-1)_self.options.error(msg.split("|")[1],msg.split("|")[2]+"|"+msg.split("|")[3]);else if(msg.indexOf("setPayPwdSuccess")>
-1)_self.options.success();else if(msg.indexOf("setPayPwdFinish")>-1){_self.options.finish();_self.remove()}else if(msg.indexOf("size")>-1){var width=msg.split("|")[1];var height=msg.split("|")[2];_self.iframe.css({width:width,height:height})}},initMessager:function(){var _self=this;_self.payMessenger=$.Messenger?new $.Messenger("setPayPwd","https://member.vipstatic.com/js/public/safe/1/vip.com"):new Messenger("setPayPwd","https://member.vipstatic.com/js/public/safe/1/vip.com");_self.phoneMessenger=$.Messenger?new $.Messenger("cellphoneSon","https://member.vipstatic.com/js/public/safe/1/vip.com"):new Messenger("cellphoneSon","https://member.vipstatic.com/js/public/safe/1/vip.com");
_self.payMessenger.addTarget(this.iframe[0].contentWindow,"s-p-p-c-Helper");_self.phoneMessenger.addTarget(this.iframe[0].contentWindow,"b-p-Helper");this.payMessenger.listen(function(msg){_self.dealWithMsg(msg,"pay")});this.phoneMessenger.listen(function(msg){_self.dealWithMsg(msg,"phone")});return this},show:function(){this.iframe.show();this.iframeBg.show();return this},hide:function(){this.iframe.hide();this.iframeBg.hide();return this},remove:function(){this.iframe.remove();this.iframeBg.remove();
return this},build:function(){this.options.isBg&&(!$("#setPayPwd_bg")[0]&&this.iframeBg.appendTo("body"));!$("#setPayPwd_iframe")[0]&&this.iframe.attr("src",this.setPayUrl).appendTo("body")},toLogin:function(){var _self=this;_self.loginMessenger=$.Messenger?new $.Messenger("loginDialog","https://member.vipstatic.com/js/public/safe/1/vip.com"):new Messenger("loginDialog","https://member.vipstatic.com/js/public/safe/1/vip.com");_self.loginMessenger.addTarget(this.iframe[0].contentWindow,"b-p-Helper");_self.loginMessenger.listen(function(msg){_self.dealWithMsg(msg,"login")});this.iframe.attr("src",
this.loginUrl).css({width:474,height:537})},toBindPhoneTip:function(){this.iframe.attr("src",this.tipsUrl).css({width:435,height:311})},toBindPhone:function(){this.iframe.attr("src",this.phoneUrl).css({width:435,height:312})}}},{}]},{},[1]);
